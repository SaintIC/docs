.. _open-control:

================
控制台使用说明
================

地址：https://open.saintic.com/control/

说明：这个是用户可以在平台中控制的行为主页。

新用户看到的页面大概是这样的：

|control_image|

.. _open-control-api:

我的API密钥
^^^^^^^^^^^^^^^^^

用于创建一个接口密钥，支持只读和读写权限，目前仅用来在花瓣网下载、堆糖网下载两个油猴脚本中识别用户身份，以提供远端下载接收显示功能，参考 :ref:`open-control-tdi-download`

- 如何创建？

    注意蓝色的"创建"链接，点击可以展开隐藏表单区域（再次点击则关闭表单），选择状态和权限，点击"立即提交"按钮即可。

    另外，每个用户只能创建5个密钥！

- 如何删除？

    控制台中会显示"我"所有密钥，每个条目后都有一个操作栏，有一个回收站的图标即是删除。

- 什么是只读、读写权限？

    只读权限即您使用此密钥只能发起GET请求；读写权限可发起GET、POST、PUT、DELETE等所有请求！

- 什么是状态？

    密钥状态有两种，启用和禁用，默认创建时是启用状态，此时密钥正常使用；禁用后密钥无法正常使用；目前仅能在创建时设置密钥状态，创建后无法修改。

.. _open-control-isso:

我的Isso服务
^^^^^^^^^^^^^^^^

即申请 `接入Isso开放服务 <https://open.saintic.com/openservice/isso>`_ ，在这里显示申请的列表。

Isso是一个自建的评论系统（需要服务器，参考 `文档 <https://isso-cn.rtfd.vip>`_ ），由于现在第三方评论服务因种种原因不好用，所以本站遂采用自建服务，经过评估发现Isso挺契合要求，相关评论已经迁移到Isso。

不过想着一只羊也是赶，两只羊也是放，所以为了给大家省服务器，正好，我写了个接入表单以创建Isso服务端配置。

其工作流程大致如下：

1. 用户填写申请表单

    必填项在接入页面就两项，其他高级设置均可选，选项的含义均可点击选项会跳转到文档对应解释处。

    提交申请时需要填写您的邮箱，这个用来接收Isso审核消息。

2. 提交表单时会弹窗显示Isso服务端配置文件渲染效果（非最终效果，密码已加密）

3. 后台审核配置，无论通过、拒绝均发送邮件通知（后续站内信开发完毕会同时发送站内信）

    通过后邮件中会有相关客户端配置文档说明。

.. _open-control-tdi-register:

我的Tdi服务(远端接入)
^^^^^^^^^^^^^^^^^^^^^^^^

即接入花瓣&堆糖远程下载服务(Tdi)的数据。

花瓣网、堆糖网两个油猴下载脚本可以选择使用远程下载，默认情况下使用平台自身进行下载服务，但此部分独立了一份代码（Tdi），使得其他用户可以部署Tdi程序分担下载任务。

故，此处显示了用户自己接入的Tdi服务数据，包括Tdi地址、令牌、系统资源等。

在这里，用户可以操作自己接入的Tdi程序，删除或转换属性为公共或专属、调整权重。

想了解更多文档，可以参考Tdi :ref:`tdi-usgae`

.. tip::

    1. 将鼠标悬浮在"远端服务地址"那一栏具体条目上，会看到此Tdi的队列数量/失败的队列数量、失败任务报警邮件等。
    2. 在"远端服务地址"那一栏具体条目前，绿色数字即当前Tdi的权重。
    3. 点击"签名令牌"那一栏具体条目上，可以修改令牌！
    4. 在"版本"那一栏具体条目上，悬浮可以看到Tdi程序所用语言及版本，比如Python2.7.5、PHP7.2.0


.. _open-control-tdi-download:

我的远端下载
^^^^^^^^^^^^^^^^

用户使用花瓣&堆糖油猴脚本进行远程下载时，如果在脚本设置中填写了用户的API密钥，此后再使用远程下载即会在此处有记录，但只会有最新10条记录。

推荐使用油猴脚本时设置API密钥，这样用户的远程下载就能通过控制台直观地查看下载的状态、下载压缩包的大小、用时、下载链接等。

.. |control_image| image:: /_static/images/open-control.png
